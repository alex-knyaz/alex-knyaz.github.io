import{a as e,t,c as a}from"../chunks/disclose-version.DL5iwjGn.js";import{aI as r,h as o,N as l,ab as s,v as n,x as i,c,s as v,r as d,t as p,g as h,a as u,a4 as x,w as g,i as m,f,n as b}from"../chunks/runtime.DQvjzPqr.js";import{a as y,p as k,s as w,r as $}from"../chunks/props.DptcfjMo.js";import{B as T,T as S}from"../chunks/blogpost_layout.DGWRp_Fb.js";import{l as A,d as M,s as H,e as I,r as j}from"../chunks/render.CCzg_cs-.js";import{i as C}from"../chunks/if.0ji-b-L9.js";import{e as L,r as E,i as B,a as O,b as V,c as N,h as R,s as z}from"../chunks/SwitchThemeButton.FdpmDFrV.js";import{o as q,b as W}from"../chunks/index-client.BoyAmr0I.js";function _(e,t,a,r){var o=e.__styles??={};o[t]!==a&&(o[t]=a,null==a?e.style.removeProperty(t):e.style.setProperty(t,a,""))}function D(e,t,a=t){var n=r();A(e,"input",(r=>{var o=r?e.defaultValue:e.value;o=F(e)?G(o):o,a(o),n&&o!==(o=t())&&(e.value=o??"")})),(o&&e.defaultValue!==e.value||null==l(t)&&e.value)&&a(F(e)?G(e.value):e.value),s((()=>{var a=t();F(e)&&a===G(e.value)||("date"!==e.type||a||e.value)&&a!==e.value&&(e.value=a??"")}))}function F(e){var t=e.type;return"number"===t||"range"===t}function G(e){return""===e?null:+e}var P=(e,t,a)=>t(h(a).value),U=t('<label><input type="radio" name="options" class="hidden"> </label>'),X=t('<div class="inline-flex"></div>');function Y(t,a){n(a,!0);let r=y(a,"options",19,(()=>[])),o=y(a,"value",15,"");const l=e=>{o(e)};var s=X();L(s,21,r,B,((t,a,s)=>{var n=U(),i=c(n);E(i),i.__change=[P,l,a];var u=v(i);d(n),p((()=>{O(n,`px-2 py-1 text-sm cursor-pointer select-none bg-gray-50 dark:bg-gray-800 border \n        border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 \n        dark:hover:bg-gray-700 ${(0===s?"rounded-l":"")??""} ${(s===r().length-1?"rounded-r":"")??""} \n        ${(0!==s?"border-l-0":"")??""} ${(o()===h(a).value?"!bg-blue-500 !text-white !dark:bg-blue-600":"")??""}`),V(i,h(a).value),N(i,o()===h(a).value),H(u,` ${h(a).label??""}`)})),e(t,n)})),d(s),e(t,s),i()}M(["change"]);var J=t('<button class="btn btn-primary svelte-1vphx4i">+</button>'),K=t('<button class="btn btn-danger svelte-1vphx4i">×</button>'),Q=t('<div class="flex flex-col gap-0.5 bg-gray-700/10 hover:bg-gray-700/20 text-sm dark:bg-gray-700/50 p-1 rounded dark:hover:bg-gray-400/20 svelte-1vphx4i"><div class="flex items-center gap-1 svelte-1vphx4i"><input type="color" class="w-5 h-5 rounded cursor-pointer svelte-1vphx4i"> <div class="flex-1 flex items-center gap-1 font-mono text-xs svelte-1vphx4i"><span class="dark:text-gray-300 svelte-1vphx4i"> </span> <span class="dark:text-gray-400 svelte-1vphx4i"> </span></div> <!></div> <textarea placeholder="Annotation text" class="w-full px-1 py-0.5 mt-1 text-xs border rounded dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 resize-none overflow-hidden leading-4 svelte-1vphx4i" rows="1"></textarea></div>'),Z=t('<div class="relative svelte-1vphx4i"><div id="rendered-html-text" class="svelte-1vphx4i"><pre class="whitespace-pre-wrap break-all svelte-1vphx4i"><!></pre></div> <div class="flex gap-2 p-2 absolute top-0 right-0 svelte-1vphx4i"><button class="btn text-gray-200 hover:text-gray-800 dark:hover:text-gray-200 svelte-1vphx4i">Copy HTML</button> <button class="btn text-gray-200 hover:text-gray-800 dark:hover:text-gray-200 svelte-1vphx4i">Copy Rich Text</button></div></div>'),ee=t('<div class="relative svelte-1vphx4i"><svg class="w-full svelte-1vphx4i" style="font-family: monospace;"><!></svg> <div class="flex gap-2 p-2 absolute top-0 right-0 svelte-1vphx4i"><button class="btn text-gray-200 hover:text-gray-800 dark:hover:text-gray-200 svelte-1vphx4i">Download SVG</button></div></div>'),te=t('<div class="relative svelte-1vphx4i"><canvas id="rendered-canvas" class="svelte-1vphx4i"></canvas></div>'),ae=t('<div class="border border-gray-300 dark:border-gray-600 rounded mb-10 svelte-1vphx4i"><pre class="leading-[1] bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 p-1 m-0 !text-xs svelte-1vphx4i">\nTODO: \n[ ] canvas render\n[ ] multiline vertial line renderer (svg)\n[ ] ascii render \n[ ] annotation entry\n[ ] make radio button group it\'s own component.\n[ ] no-color mode.\n[ ] make mini buttons more distinct\n[ ] bckground abaptable button.\n\n</pre> <div id="selection-tracking-area" contenteditable="true" class="mt-1 p-2 w-full border dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300 rounded svelte-1vphx4i"> </div> <div class="flex gap-2 svelte-1vphx4i"><div class="flex flex-col gap-2 w-3/4 svelte-1vphx4i"><span class="text-sm dark:text-gray-300 mt-6 svelte-1vphx4i">New Annotation:</span> <!> <span class="text-sm dark:text-gray-300 svelte-1vphx4i">Current Annotations:</span> <div class="space-y-0.5 svelte-1vphx4i"></div></div> <div class="flex flex-col gap-2 text-sm mt-6 svelte-1vphx4i"><div class="flex gap-4 svelte-1vphx4i"><label class="dark:text-gray-300 svelte-1vphx4i">Background: <br class="svelte-1vphx4i"> <input type="color" class="w-8 h-8 rounded cursor-pointer svelte-1vphx4i"></label> <label class="dark:text-gray-300 svelte-1vphx4i">Text: <br class="svelte-1vphx4i"> <input type="color" class="w-8 h-8 rounded cursor-pointer svelte-1vphx4i"></label></div> <label class="dark:text-gray-300 svelte-1vphx4i">Style: <br class="svelte-1vphx4i"> <!></label> <label class="dark:text-gray-300 svelte-1vphx4i">Line Position: <br class="svelte-1vphx4i"> <!></label> <label class="dark:text-gray-300 svelte-1vphx4i">Horizontal Position: <br class="svelte-1vphx4i"> <!></label> <label class="dark:text-gray-300 svelte-1vphx4i">Render Backend: <br class="svelte-1vphx4i"> <!></label></div></div> <div class="dark:bg-gray-800 rounded svelte-1vphx4i"><!></div></div>');function re(t,r){n(r,!0);const o=(t,a=m,r=m)=>{var o=Q(),l=c(o),s=c(l);E(s);var n=v(s,2),i=c(n),u=c(i);d(i);var x=v(i,2),g=c(x);p((()=>H(g,`(${h(b).slice(a().from,a().to+1)??""})`))),d(x),d(n);var f=v(n,2),y=t=>{var a=J();I("click",a,(()=>w.push(h($)))),e(t,a)},k=t=>{var a=K();I("click",a,(()=>w.splice(r(),1))),e(t,a)};C(f,(e=>{-1===r()?e(y):e(k,!1)})),d(l);var T=v(l,2);j(T),d(o),p((()=>H(u,`${a().from??""}-${a().to??""}`))),D(s,(()=>a().color),(e=>a().color=e)),D(T,(()=>a().text),(e=>a().text=e)),I("input",T,U),e(t,o)};let l=y(r,"initialText",3,'const x = "hello" + 123; ASDF'),s=y(r,"initialAnnotations",19,(()=>[{from:10,to:16,text:"string",color:"#ff7575"},{from:20,to:22,text:"number",color:"#75ff75"},{from:18,to:18,text:"can't add these types",color:"#7575ff"}])),b=u(k(l())),w=k(s()),$=u(k({from:0,to:0,text:"",color:"#ffffff"})),T=u(!1),S=u("mid"),A=u("start"),M=u("#000000"),O=u("#ffffff"),V=u("html"),N=u(void 0),F=u(void 0),G=u(k({lineHeight:0,charWidth:0,ready:!1}));function P(e){e&&(e.style.height="auto",e.style.height=e.scrollHeight+"px")}function U(e){P(e.target)}x((()=>{document.querySelectorAll("textarea").forEach(P)})),x((()=>{if(h(N)&&!h(G).ready){const e=function(e,t={}){const{fontFamily:a="monospace",fontSize:r="14px",sampleText:o="X",lineHeightMultiplier:l=1.2}=t,s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttribute("font-family",a),s.setAttribute("font-size",r),s.textContent=o,e.appendChild(s);const n=s.getBBox();return e.removeChild(s),{lineHeight:n.height*l,charWidth:n.width}}(h(N));g(G,k({...e,ready:!0}))}}));const X={mid:{sharp:"│─┬└┤",round:"│─┬╰┤"},start:{sharp:"│─┌└┤",round:"│─╭╰┤"},end:{sharp:"│─┐└┤",round:"│─╮╰┤"}},re=e=>({mid:Math.floor((e.from+e.to)/2),start:e.from,end:e.to}[h(S)]),oe=(e,t)=>`<span style="color: ${t}">${e}</span>`,le=()=>{const e=((e,t)=>{const a=X[t],r=e?a.round:a.sharp;return{v:r[0],h:r[1],top:r[2],bottom:r[3],vt:r[4]}})(h(T),h(S)),t=Array(h(b).length).fill(" "),a=w.map((e=>e.text.split("\n").length)).reduce(((e,t)=>e+t),0)+1,r=Array(a).fill(0).map((()=>Array(h(b).length).fill(" "))),o=[...w].sort(((e,t)=>e.from-t.from));for(let n of o){for(let a=n.from;a<=n.to;a++)t[a]=oe(e.h,n.color);t[re(n)]=oe(e.top,n.color)}let l=0;for(let n=0;n<o.length;n++){const t=o[n],s=a-l;let i=t.text.split("\n");const c=re(t);l+=i.length;const v=s-i.length,d=s-1,p=s-Math.ceil(i.length/2);let u=d;"start"===h(A)?u=v:"mid"===h(A)&&(u=p);for(let a=0;a<u;a++)r[a][c]=oe(e.v,t.color);const x=e.bottom+e.h;r[u][c]=oe(x,t.color);for(let a=0;a<i.length;a++){let o=2;v+a===u&&(o=1);const l=v+a===u?e.vt:e.v;r[v+a][c+o]=oe(l+i[a],t.color)}}let s=t.join("");return[oe(h(b),h(O)),s,...r.map((e=>e.join("")))].join("\n")},se=(e,t)=>{const a=document.getElementById("selection-tracking-area");if(!a||!e)return 0;let r=0;const o=document.createTreeWalker(a,NodeFilter.SHOW_TEXT);let l=o.nextNode();for(;l;){if(l===e)return r+t;r+=l.textContent?.length||0,l=o.nextNode()}return r+t-1};q((()=>{const e=()=>{const e=window.getSelection();e&&(e=>{const t=document.getElementById("selection-tracking-area");if(!t?.contains(e.anchorNode))return;const a=se(e.anchorNode,e.anchorOffset),r=se(e.focusNode,e.focusOffset);g($,k({...h($),from:Math.min(a,r),to:Math.max(a,r)-(r!=a?1:0)}))})(e)};return document.addEventListener("selectionchange",e),()=>document.removeEventListener("selectionchange",e)}));const ne=()=>{if(!h(G).ready)return"";const{lineHeight:e,charWidth:t}=h(G),a=.6*e,r=.2*e,o=.8*e,l=.4*e,s=[];s.push(`\n            <text x="0" y="${e}" fill="${h(O)}"\n                font-family="monospace" font-size="14px">${h(b)}</text>`);const n=[...w].sort(((e,t)=>t.from-e.from));let i=e+r+a;for(const[c,v]of n.entries()){const n={start:0,mid:t/2,end:t},d=re(v)*t+n[h(S)];c>0&&(i+=1.1*a);const p=v.text.split("\n"),u=p.length,x=(u-1)*o,g=e+r;let m=[];if("mid"===h(S))m=[`M ${v.from*t} ${g}`,"H "+(v.to+1)*t,`M ${d} ${g}`,"V "+(i-3),h(T)?"q 0 3 3 3":`V ${i}`,`h ${h(T)?t-3:t}`,`M ${d+t} ${i-.4*o}`,`v ${u>1?x+.8*o:.8*o}`];else{let[e,a]=[v.from*t,(v.to+1)*t],r=`H ${a-3} q 3 0 3 3`;"start"===h(S)&&([e,a]=[(v.to+1)*t,v.from*t],r=`H ${a+3} q -3 0 -3 3`),m=[`M ${e} ${g}`,h(T)?r:`H ${a}`,h(T)?`V ${i-3} q 0 3 3 3`:`V ${i}`,h(T)?"h "+(t-3):`h ${t}`,`M ${d+t} ${i-.4*o}`,`v ${u>1?x+.8*o:.8*o}`]}s.push(`<path d="${m.join(" ")}" stroke="${v.color}" fill="none" stroke-width="1"/>`),p.forEach(((e,a)=>{const r=i+a*o;s.push(`<text x="${d+t+4}" y="${r}"\n                    fill="${v.color}" dominant-baseline="middle"\n                    font-family="monospace" font-size="14px">${e}</text>`)})),i+=x+l}return s.join("")};var ie=ae(),ce=v(c(ie),2),ve=c(ce,!0);d(ce);var de=v(ce,2),pe=c(de),he=v(c(pe),2);o(he,(()=>h($)),(()=>-1));var ue=v(he,4);L(ue,21,(()=>w),B,((e,t,a)=>{o(e,(()=>h(t)),(()=>a))})),d(ue),d(pe);var xe=v(pe,2),ge=c(xe),me=c(ge),fe=v(c(me),3);E(fe),d(me);var be=v(me,2),ye=v(c(be),3);E(ye),d(be),d(ge);var ke=v(ge,2);Y(v(c(ke),3),{options:[{value:!1,label:"Square"},{value:!0,label:"Round"}],get value(){return h(T)},set value(e){g(T,k(e))}}),d(ke);var we=v(ke,2);Y(v(c(we),3),{options:[{value:"start",label:"Start"},{value:"mid",label:"Mid"},{value:"end",label:"End"}],get value(){return h(S)},set value(e){g(S,k(e))}}),d(we);var $e=v(we,2);Y(v(c($e),3),{options:[{value:"start",label:"Start"},{value:"mid",label:"Mid"},{value:"end",label:"End"}],get value(){return h(A)},set value(e){g(A,k(e))}}),d($e);var Te=v($e,2);Y(v(c(Te),3),{options:[{value:"html",label:"HTML"},{value:"svg",label:"SVG"},{value:"ascii",label:"ASCII"},{value:"canvas",label:"Canvas"}],get value(){return h(V)},set value(e){g(V,k(e))}}),d(Te),d(xe),d(de);var Se=v(de,2),Ae=c(Se),Me=t=>{var a=Z(),r=c(a),o=c(r);_(o,"line-height",1.15);var l=c(o);R(l,le,!1,!1),d(o),W(o,(e=>g(F,e)),(()=>h(F))),d(r);var s=v(r,2),n=c(s),i=v(n,2);d(s),d(a),p((()=>{_(o,"color",h(O)),_(o,"background-color",h(M))})),I("click",n,(()=>h(F)&&(async e=>{try{await navigator.clipboard.writeText(e.outerHTML),console.log("HTML copied to clipboard")}catch(t){throw console.error("Failed to copy HTML:",t),t}})(h(F)))),I("click",i,(()=>h(F)&&(async e=>{try{const t=[new ClipboardItem({"text/html":new Blob([e.innerHTML],{type:"text/html"})})];await navigator.clipboard.write(t),console.log("Rich text copied to clipboard")}catch(t){throw console.error("Failed to copy rich text:",t),t}})(h(F)))),e(t,a)},He=t=>{var r=a(),o=f(r),l=t=>{var a=ee(),r=c(a);p((()=>z(r,"viewBox",(()=>{if(!h(G).ready)return"0 0 0 0";const{lineHeight:e,charWidth:t}=h(G),a=t,r=.6*e,o=.2*e,l=.8*e,s=Math.max(0,...w.map((e=>{const r=Math.max(...e.text.split("\n").map((e=>e.length)));return re(e)*t+r*t+3*a}))),n=Math.max(h(b).length*t,s),i=e+o;if(0===w.length)return`-${a} -${a} ${n+2*a} ${i+2*a}`;const c=w.reduce(((e,t,a)=>{const o=t.text.split("\n").length;return e+(a>0?1.1*r:r)+l*(o-1)}),i+r);return`-${a} -${a} ${n+2*a} ${c+3*a}`})())));var o=c(r);R(o,ne,!0,!1),d(r),W(r,(e=>g(N,e)),(()=>h(N)));var l=v(r,2),s=c(l);d(l),d(a),I("click",s,(()=>h(N)&&((e,t="download.svg")=>{const a=(new XMLSerializer).serializeToString(e),r=new Blob([a],{type:"image/svg+xml"}),o=URL.createObjectURL(r),l=document.createElement("a");l.href=o,l.download=t,l.click(),URL.revokeObjectURL(o)})(h(N),"annotation.svg"))),e(t,a)},s=t=>{var r=a(),o=f(r),l=t=>{var a=te(),r=c(a);z(r,"height",20),d(a),p((()=>z(r,"width",10*h(b).length))),e(t,a)};C(o,(e=>{"canvas"===h(V)&&e(l)}),!0),e(t,r)};C(o,(e=>{"svg"===h(V)?e(l):e(s,!1)}),!0),e(t,r)};C(Ae,(e=>{"html"===h(V)?e(Me):e(He,!1)})),d(Se),d(ie),p((()=>{H(ve,h(b)),_(Se,"background-color",h(M))})),I("input",ce,(e=>{const t=e.target;g(b,k(t.innerText))})),D(fe,(()=>h(M)),(e=>g(M,e))),D(ye,(()=>h(O)),(e=>g(O,e))),e(t,ie),i()}const oe={title:"TextAnnotator",description:"Add notes to a line of text (monospace)",tags:["projects","tool","obsidian","note-taking","ascii","math","svg","html","image","monospace"],hide:!0};var le=t('<h1 id="textannotator">TextAnnotator</h1> <!> <!> <h2 id="description">Description</h2> <p>This tool allows you to add notes to text in a monospace (fixed-width) font.\nYou can use this to add notes to a line of code, help explain terminal output,\nannotate ASCII math expressions, etc.</p> <p>Then result can be rendered as HTML, SVG, or ASCII escape sequences or image.</p> <p>The SVG, HTML or image can be pasted into a note taking app (like Obsidian)\nor a website.</p> <h2 id="examples">Examples</h2> <p>here are some examples of how you can use this tool:</p> <ul><li>Add notes to a line of code</li> <li>Help explain terminal output</li> <li>Annotate ASCII math expressions</li></ul> <h2 id="other-tools">Other tools</h2> <p>here are some other tools that i found on the internet that are not made by me but are related to ASCII art:</p> <ul><li><a href="https://asciiflow.com/#/" rel="nofollow">asciiflow</a> - ASCII diagram editor</li> <li><a href="https://www.asciiart.eu/ascii-draw-studio" rel="nofollow">ascii draw studio</a> - ASCII art editor</li> <li><a href="https://patorjk.com/software/taag/#p=display&amp;f=Rectangles&amp;t=Type%20Something%20" rel="nofollow">some person text to ascii-text converter</a></li> <li><a href="https://www.gridsagegames.com/rexpaint/features.html" rel="nofollow">rexpaint</a> - another ASCII art editor</li></ul>',1);function se(t,a){let r=$(a,["$$slots","$$events","$$legacy"]);T(t,w((()=>r),oe,{children:(t,a)=>{var r=le(),o=v(f(r),2);re(o,{});var l=v(o,2);S(l,{headings:[{level:1,text:"TextAnnotator",id:"textannotator"},{level:2,text:"Description",id:"description"},{level:2,text:"Examples",id:"examples"},{level:2,text:"Other tools",id:"other-tools"}]}),b(20),e(t,r)},$$slots:{default:!0}}))}export{se as component};
